# =============================================
# Demeter AI 2.0 — Application Configuration
# =============================================

# Application
quarkus.application.name=demeter-backend
quarkus.application.version=0.1.0

# HTTP
quarkus.http.port=8080
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization,X-Tenant-ID

# Datasource — Dev profile (default)
quarkus.datasource.db-kind=postgresql
%dev.quarkus.datasource.username=demeter
%dev.quarkus.datasource.password=demeter_dev
%dev.quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/demeter

# Datasource — Staging
%staging.quarkus.datasource.username=${DB_USER}
%staging.quarkus.datasource.password=${DB_PASSWORD}
%staging.quarkus.datasource.jdbc.url=${DB_URL}

# Datasource — Prod
%prod.quarkus.datasource.username=${DB_USER}
%prod.quarkus.datasource.password=${DB_PASSWORD}
%prod.quarkus.datasource.jdbc.url=${DB_URL}

# Hibernate ORM
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.multitenant=DISCRIMINATOR
quarkus.hibernate-orm.log.sql=false
%dev.quarkus.hibernate-orm.log.sql=true

# Flyway
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=db/migration

# OIDC — Dev (disabled for local dev)
%dev.quarkus.oidc.enabled=false
%dev.quarkus.security.auth.enabled-in-dev-mode=false

# OIDC — Production (Auth0)
%prod.quarkus.oidc.auth-server-url=${OIDC_AUTH_SERVER_URL}
%prod.quarkus.oidc.client-id=${OIDC_CLIENT_ID}
%prod.quarkus.oidc.token.issuer=${OIDC_ISSUER}
quarkus.oidc.application-type=service
quarkus.oidc.roles.role-claim-path=permissions

# OpenAPI / Swagger UI
quarkus.smallrye-openapi.info-title=Demeter AI 2.0 API
quarkus.smallrye-openapi.info-version=0.1.0
quarkus.smallrye-openapi.info-description=Multi-tenant stock control and analytics platform
quarkus.swagger-ui.always-include=true

# Health checks

# Jackson
quarkus.jackson.write-dates-as-timestamps=false

# Logging
quarkus.log.level=INFO
%dev.quarkus.log.level=DEBUG
%dev.quarkus.log.category."com.fortytwo.demeter".level=DEBUG
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
